<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Failure Diagnostic Aid</title>
    <style>
        /* General Styles */
        :root {
            --primary-color: #0056b3; /* A slightly darker blue */
            --secondary-color: #f8f9fa; /* Light grey background */
            --border-color: #dee2e6; /* Lighter border */
            --text-color: #212529; /* Dark grey text */
            --light-text-color: #6c757d; /* Medium grey text */
            --error-color: #dc3545; /* Red for errors/warnings */
            --success-color: #198754; /* Green for success/indication */
            --info-bg-color: #eef; /* Light blue/purple for info sections */
            --border-radius: 0.375rem; /* Slightly larger radius */
            --box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #e9ecef; /* Slightly off-white page background */
            margin: 0;
            padding: 0;
        }

        /* Main Container */
        .main-container {
            max-width: 900px;
            margin: 2rem auto;
            background-color: #ffffff;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden; /* Contain child elements */
        }

        /* Header */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1.5rem 2rem;
            text-align: center;
            border-bottom: 5px solid #003f7e; /* Darker blue accent */
        }

        header h1 {
            margin: 0;
            font-size: 1.75rem;
            font-weight: 500;
        }

        /* Content Padding */
        .content-padding {
            padding: 1.5rem 2rem;
        }

        /* Informational Section */
        .info-section {
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .info-section h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        .info-section h3 {
            color: var(--text-color);
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .info-section p,
        .info-section ul {
            margin-bottom: 1rem;
            color: var(--text-color);
        }
        .info-section ul {
            padding-left: 1.5rem;
        }
        .info-section li {
            margin-bottom: 0.5rem;
        }
        .info-section strong {
            font-weight: 600;
        }

        /* Form Styling */
        form {
            margin-bottom: 1.5rem;
        }

        fieldset {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            background-color: #fff; /* Keep form fields on white */
        }

        legend {
            font-weight: 600;
            font-size: 1.2rem;
            padding: 0 0.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem; /* Add space below legend */
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem; /* Increased gap */
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }

        .form-group select,
        .form-group input[type="number"] /* Added for potential future use */
         {
            width: 100%;
            padding: 0.75rem; /* Increased padding */
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            background-color: #fff;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .form-group select:focus,
        .form-group input[type="number"]:focus {
            border-color: #86b7fe; /* Blue focus border */
            outline: 0;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); /* Blue focus glow */
        }

        /* Button Container */
        .button-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Buttons */
        button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            min-width: 120px; /* Ensure buttons have a decent minimum width */
        }

        button:hover {
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        #interpretBtn {
            background-color: var(--primary-color);
            color: white;
        }

        #interpretBtn:hover {
            background-color: #004080; /* Darker blue on hover */
        }

        #resetBtn {
            background-color: var(--light-text-color);
            color: white;
        }

        #resetBtn:hover {
            background-color: #5a6268; /* Darker grey on hover */
        }

        /* Results Area */
        #result {
            background-color: var(--info-bg-color);
            border: 1px solid #bdd4ff; /* Lighter blue border for results */
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            display: none; /* Hidden by default */
        }

        #result h2 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            font-size: 1.4rem;
        }

        .result-label {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            margin-top: 1rem; /* Space between result sections */
            font-size: 1.1rem;
        }

        #classificationDisplay,
        #managementFocusDisplay,
        #notesDisplay {
            margin-bottom: 1rem;
            padding-left: 0; /* Reset padding if using lists */
            list-style-position: inside; /* Keep bullet points inside */
        }

        #managementFocusDisplay ul,
        #notesDisplay ul {
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            padding-left: 1.25rem; /* Indent list items */
        }
        #managementFocusDisplay li,
        #notesDisplay li {
             margin-bottom: 0.5rem;
        }

        /* Emphasis Classes */
        .indication { color: var(--success-color); font-weight: 500; }
        .contraindication { color: var(--error-color); font-weight: 500; }
        .highlight { background-color: #fff3cd; padding: 0.2em 0.4em; border-radius: 0.25rem; }

        /* Disclaimer */
        .disclaimer {
            margin: 2rem auto 1rem auto; /* Adjusted margin */
            padding: 1rem;
            font-style: italic;
            color: #664d03; /* Dark yellow text */
            background-color: #fff3cd; /* Light yellow background */
            border: 1px solid #ffecb5; /* Yellow border */
            border-radius: var(--border-radius);
            text-align: center;
            max-width: 850px; /* Match container width better */
            font-size: 0.9rem;
        }
         .disclaimer strong {
             color: #594000;
         }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                margin: 1rem;
                width: auto;
            }
            .content-padding {
                padding: 1rem 1.5rem;
            }
            header {
                padding: 1rem 1.5rem;
            }
            header h1 {
                font-size: 1.5rem;
            }
            .form-grid {
                grid-template-columns: 1fr; /* Stack form elements */
                gap: 1rem;
            }
             .button-container {
                flex-direction: column;
             }
             button {
                 width: 100%;
             }
        }
         @media (max-width: 480px) {
             body {
                 font-size: 15px; /* Slightly smaller base font on small screens */
             }
              header h1 {
                 font-size: 1.3rem;
             }
              .info-section h2, #result h2 {
                 font-size: 1.25rem;
             }
             legend {
                 font-size: 1.1rem;
             }
             .content-padding {
                 padding: 1rem;
             }
              button {
                 padding: 0.65rem 1rem;
                 font-size: 0.95rem;
             }
         }

    </style>
</head>

<body>

    <div class="main-container">
        <header>
            <h1>Heart Failure Diagnostic Aid</h1>
        </header>

        <div class="content-padding">

            <section class="info-section">
                <h2>Background Information: Heart Failure</h2>

                <h3>Definition</h3>
                <p>Heart failure (HF) is a clinical syndrome resulting from structural or functional impairment of ventricular filling or ejection of blood, leading to an inability to meet the body's metabolic demands. It often involves elevated cardiac filling pressures and a tendency towards volume retention. While supportive evidence like elevated natriuretic peptides (BNP/NT-proBNP) and echocardiographic findings are important, HF remains a clinical diagnosis.</p>

                <h3>Classification</h3>
                <ul>
                    <li><strong>Based on Ejection Fraction (EF):</strong> This is crucial for guiding therapy.
                        <ul>
                            <li><strong>HFrEF</strong> (HF with Reduced EF): LVEF ≤ 40%</li>
                            <li><strong>HFmrEF</strong> (HF with Mildly Reduced EF): LVEF 41-49%</li>
                            <li><strong>HFpEF</strong> (HF with Preserved EF): LVEF ≥ 50%</li>
                        </ul>
                    </li>
                     <li><strong>NYHA Functional Classification:</strong> Describes symptom severity and functional limitations.</li>
                     <li><strong>AHA/ACC Stages:</strong> Describes progression from risk factors (Stage A) to refractory HF (Stage D).</li>
                </ul>


                <h3>Common Etiologies</h3>
                 <p>A <strong>Transthoracic Echocardiogram (TTE)</strong> is vital to determine EF and evaluate structure/function.</p>
                <ul>
                    <li><strong>Ischemic Heart Disease:</strong> Most common cause in many regions. Evaluation for coronary artery disease (CAD) is essential in new HF diagnoses.</li>
                    <li><strong>Non-Ischemic Cardiomyopathies:</strong>
                        <ul>
                            <li><strong>Hypertension:</strong> Chronic high blood pressure.</li>
                            <li><strong>Valvular Heart Disease:</strong> e.g., Aortic Stenosis, Mitral Regurgitation.</li>
                            <li><strong>Arrhythmias:</strong> e.g., Tachycardia-mediated cardiomyopathy, chronic RV pacing effects.</li>
                            <li><strong>Toxins:</strong> Alcohol, certain chemotherapies, illicit drugs (cocaine, meth).</li>
                            <li><strong>Inflammatory/Infectious:</strong> Viral myocarditis, Chagas disease, HIV, autoimmune conditions (SLE, Sarcoidosis).</li>
                            <li><strong>Metabolic/Infiltrative:</strong> Thiamine deficiency (Beri Beri), Amyloidosis, Hemochromatosis.</li>
                            <li><strong>Genetic/Inherited Cardiomyopathies.</strong></li>
                            <li><strong>Stress-Induced:</strong> Takotsubo cardiomyopathy, sepsis-related.</li>
                            <li><strong>Peripartum Cardiomyopathy.</strong></li>
                         </ul>
                    </li>
                     <li><strong>HFpEF often associated with:</strong> Systemic hypertension, aging, obesity, diabetes mellitus, metabolic syndrome, chronic kidney disease.</li>
                 </ul>
                 <h3>Acute HF Exacerbation Triggers</h3>
                 <p>Common reasons for worsening HF include: Non-adherence (meds/diet), new ischemia/arrhythmia (esp. AFib), uncontrolled hypertension, infection, pulmonary embolism, new medications (e.g., NSAIDs, steroids), anemia, renal failure, thyroid dysfunction.</p>

                <h3>Key Diagnostic Parameters Used in This Aid</h3>
                <ul>
                    <li><strong>Left Ventricular Ejection Fraction (LVEF):</strong> Categorizes the primary HF type (HFrEF/HFmrEF/HFpEF).</li>
                    <li><strong>Signs of Congestion ("Wet"):</strong> Reflects volume overload (e.g., elevated JVP, edema, crackles, orthopnea/PND).</li>
                    <li><strong>Signs of Hypoperfusion ("Cold"):</strong> Reflects inadequate tissue perfusion (e.g., cool extremities, altered mental status, narrow pulse pressure, worsening renal function due to poor flow).</li>
                     <li><strong>NYHA Class:</strong> Indicates chronic symptom severity.</li>
                     <li><strong>BNP/NT-proBNP Level:</strong> Biomarker supporting the diagnosis and assessing severity/prognosis.</li>
                </ul>

                <h3>Basic Evaluation Approach</h3>
                <ol>
                    <li><strong>History & Physical Exam:</strong> Focus on symptoms (dyspnea, orthopnea, PND, edema), medication adherence, potential triggers, volume status (JVP, edema, HJR, lung sounds), and perfusion (extremity temp, mental status, pulse pressure).</li>
                    <li><strong>Initial Workup:</strong> ECG, Chest X-ray, Labs (CBC, Chem-10, Troponin, BNP/NT-proBNP, LFTs, TSH). Consider lactate if shock suspected.</li>
                    <li><strong>Echocardiogram (TTE):</strong> Essential to confirm EF, assess valvular function, chamber sizes, and diastolic function.</li>
                    <li><strong>Etiology Workup:</strong> Based on clinical picture, may include stress testing, coronary angiography, cardiac MRI, genetic testing, or specific labs (iron studies, HIV, etc.).</li>
                </ol>

            </section>

            <form id="hfForm">
                <fieldset>
                    <legend>Patient Presentation & Key Findings</legend>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="lvef_category">Left Ventricular Ejection Fraction (LVEF)</label>
                            <select id="lvef_category" name="lvef_category" required>
                                <option value="">Select LVEF Category...</option>
                                <option value="lte40">≤ 40% (HFrEF)</option>
                                <option value="41_49">41-49% (HFmrEF)</option>
                                <option value="gte50">≥ 50% (HFpEF)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="congestion_status">Clinical Signs of Congestion (Wet)?</label>
                            <select id="congestion_status" name="congestion_status" required>
                                <option value="">Select Status...</option>
                                <option value="yes">Yes (e.g., Elevated JVP, Edema, Crackles)</option>
                                <option value="no">No (Appears Euvolemic)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="perfusion_status">Clinical Signs of Hypoperfusion (Cold)?</label>
                            <select id="perfusion_status" name="perfusion_status" required>
                                <option value="">Select Status...</option>
                                <option value="yes">Yes (e.g., Cool Extremities, AMS, Poor Urine)</option>
                                <option value="no">No (Appears Well-Perfused)</option>
                            </select>
                        </div>

                         <div class="form-group">
                            <label for="nyha_class">NYHA Functional Class (Chronic)</label>
                            <select id="nyha_class" name="nyha_class">
                                <option value="">Select NYHA Class (Optional)...</option>
                                <option value="I">I (No limitation)</option>
                                <option value="II">II (Slight limitation)</option>
                                <option value="III">III (Marked limitation)</option>
                                <option value="IV">IV (Symptoms at rest)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="bnp_level">BNP / NT-proBNP Level</label>
                            <select id="bnp_level" name="bnp_level">
                                <option value="">Select Level (Optional)...</option>
                                <option value="normal">Normal / Low</option>
                                <option value="elevated">Elevated</option>
                                <option value="markedly_elevated">Markedly Elevated</option>
                            </select>
                        </div>
                    </div>
                </fieldset>

                <div class="button-container">
                    <button type="button" id="interpretBtn">Interpret</button>
                    <button type="button" id="resetBtn">Reset</button>
                </div>
            </form>

            <div id="result">
                <h2>Interpretation Results</h2>
                <p class="result-label">Classification & Hemodynamic Profile:</p>
                <p id="classificationDisplay"></p>

                <p class="result-label">Initial Management Focus:</p>
                <ul id="managementFocusDisplay"></ul>

                <p class="result-label">Key Considerations & Next Steps:</p>
                <ul id="notesDisplay"></ul>
            </div>

            <div class="disclaimer">
                <strong>Disclaimer:</strong> This tool provides a simplified interpretation based on selected parameters for educational purposes. It is <strong>NOT</strong> a substitute for comprehensive clinical evaluation, professional medical advice, diagnosis, or treatment by a qualified healthcare provider. Heart failure management is complex and requires integration of patient history, full physical exam, laboratory data, imaging, and clinical judgment. Always consult relevant clinical practice guidelines and expert opinion for definitive patient care decisions.
            </div>

        </div> <!-- End content-padding -->
    </div> <!-- End main-container -->

    <script>
        // DOM Element References
        const lvefSelect = document.getElementById('lvef_category');
        const congestionSelect = document.getElementById('congestion_status');
        const perfusionSelect = document.getElementById('perfusion_status');
        const nyhaSelect = document.getElementById('nyha_class');
        const bnpSelect = document.getElementById('bnp_level');
        const interpretBtn = document.getElementById('interpretBtn');
        const resetBtn = document.getElementById('resetBtn');
        const resultDiv = document.getElementById('result');
        const classificationDisplay = document.getElementById('classificationDisplay');
        const managementFocusDisplay = document.getElementById('managementFocusDisplay');
        const notesDisplay = document.getElementById('notesDisplay');
        const form = document.getElementById('hfForm');
        const formInputs = form.querySelectorAll('select'); // Get all select inputs

        // --- Event Listeners ---
        interpretBtn.addEventListener('click', interpretHeartFailure);
        resetBtn.addEventListener('click', resetForm);

        // Hide results if form inputs are changed after interpretation
        formInputs.forEach(input => {
            input.addEventListener('change', () => {
                if (resultDiv.style.display !== 'none') {
                    resultDiv.style.display = 'none';
                }
            });
        });

        // --- Functions ---

        function resetForm() {
            form.reset(); // Resets the form element itself
            resultDiv.style.display = 'none'; // Hide results
            classificationDisplay.textContent = '';
            managementFocusDisplay.innerHTML = ''; // Clear list items
            notesDisplay.innerHTML = ''; // Clear list items
        }

        function interpretHeartFailure() {
            // Get selected values
            const lvef = lvefSelect.value;
            const congestion = congestionSelect.value;
            const perfusion = perfusionSelect.value;
            const nyha = nyhaSelect.value; // Optional
            const bnp = bnpSelect.value; // Optional

            // --- Basic Input Validation ---
            if (!lvef || !congestion || !perfusion) {
                alert('Please select LVEF category, Congestion status, and Perfusion status.');
                return;
            }

            // --- Core Logic ---
            let classification = '';
            let managementFocus = [];
            let notes = [];

            // Determine HF Type
            let hfType = '';
            let lvefText = '';
            if (lvef === 'lte40') {
                hfType = 'HFrEF';
                lvefText = '≤ 40%';
            } else if (lvef === '41_49') {
                hfType = 'HFmrEF';
                lvefText = '41-49%';
            } else if (lvef === 'gte50') {
                hfType = 'HFpEF';
                lvefText = '≥ 50%';
            }

            // Determine Hemodynamic Profile
            let profile = '';
            let profileText = '';
            if (congestion === 'yes' && perfusion === 'no') {
                profile = 'Wet & Warm';
                profileText = 'Congested (Wet) & Well-Perfused (Warm)';
            } else if (congestion === 'yes' && perfusion === 'yes') {
                profile = 'Wet & Cold';
                profileText = 'Congested (Wet) & Hypoperfused (Cold)';
            } else if (congestion === 'no' && perfusion === 'no') {
                profile = 'Dry & Warm';
                profileText = 'Euvolemic (Dry) & Well-Perfused (Warm)';
            } else if (congestion === 'no' && perfusion === 'yes') {
                profile = 'Dry & Cold';
                profileText = 'Euvolemic (Dry) & Hypoperfused (Cold)';
            }

            classification = `<strong>${hfType} (LVEF ${lvefText})</strong> - Hemodynamic Profile: <span class="highlight">${profileText}</span>`;

            // Add NYHA class if selected
            if (nyha) {
                 classification += ` (Chronic NYHA Class ${nyha})`;
            }
             // Add BNP note if selected
            if (bnp === 'elevated' || bnp === 'markedly_elevated') {
                 notes.push(`Elevated natriuretic peptides support the diagnosis of HF.`);
            } else if (bnp === 'normal') {
                 notes.push(`Normal natriuretic peptides make HF less likely, especially in acute settings, but do not rule it out (consider obesity, flash pulmonary edema, constrictive physiology).`);
            }


            // --- Tailor Management and Notes based on Profile & Type ---

             // General Notes Applicable to Most
             notes.push("Confirm LVEF and assess cardiac structure/function with formal TTE if not already done.");
             notes.push("Evaluate for and address potential triggers/precipitants of exacerbation (e.g., ischemia, arrhythmia, infection, non-adherence).");
             notes.push("Assess and manage comorbidities (HTN, DM, CKD, Anemia, Sleep Apnea).");
             notes.push("Monitor volume status (weight, I/Os), electrolytes (esp. K+, Mg++), and renal function closely.");
             notes.push("Provide patient education on diet (sodium/fluid restriction as appropriate), medications, symptom monitoring, and follow-up.");

            // Wet Profiles (Congestion Management)
            if (congestion === 'yes') {
                managementFocus.push("<strong>Diuresis:</strong> Initiate/adjust IV loop diuretics (e.g., Furosemide, Bumetanide). Consider dose escalation or adding thiazide (sequential nephron blockade) if response is poor.");
                notes.push("Target appropriate negative fluid balance based on severity of congestion and patient stability.");
                 notes.push("Replete Potassium (>4.0 mEq/L) and Magnesium (>2.0 mg/dL) aggressively during diuresis.");
                 notes.push("Do not hold diuretics solely for asymptomatic mild hypotension or initial creatinine rise if patient remains clinically congested.");
            }

             // Cold Profiles (Perfusion Management)
            if (perfusion === 'yes') {
                 managementFocus.push("<strong>Assess for Shock:</strong> If severe hypoperfusion/hypotension (Cardiogenic Shock), requires urgent stabilization, likely ICU care, consideration of inotropes/vasopressors, and potentially mechanical circulatory support.");
                 managementFocus.push("<strong>Optimize Preload/Afterload:</strong> Careful fluid management (may need gentle fluid challenge if 'Dry & Cold' and low filling pressures suspected, or continued diuresis if 'Wet & Cold'). If BP allows, consider vasodilators (carefully!) for 'Wet & Cold' to reduce afterload.");
                 notes.push("Identify and treat reversible causes of hypoperfusion.");
                 notes.push("Consider invasive hemodynamic monitoring (e.g., arterial line, PAC) in refractory shock.");
                  if (profile === 'Wet & Cold') {
                     managementFocus.push("<strong>Inotropes/Inodilators:</strong> Consider if persistent hypoperfusion despite optimizing volume/afterload (e.g., Dobutamine, Milrinone). Use lowest effective dose.");
                     notes.push("<span class='contraindication'>Avoid beta-blockers or use very cautiously in decompensated 'Wet & Cold' state until stabilized.</span>");
                 }
                  if (profile === 'Dry & Cold') {
                      notes.push("Evaluate for causes of low cardiac output other than volume depletion (e.g., severe valve disease, RV failure). Careful fluid assessment is critical.");
                       managementFocus.push("Consider inotropes if low output state persists despite volume optimization.");
                 }
            }


            // --- Specific Management based on HF Type (focus on stable/improving state or Dry/Warm) ---
            if (hfType === 'HFrEF' || hfType === 'HFmrEF') {
                 if (profile === 'Dry & Warm' || congestion === 'no') { // Stable or near-stable
                      managementFocus.push(`<strong>Initiate/Titrate Guideline-Directed Medical Therapy (GDMT) for ${hfType}:</strong> Prioritize foundational pillars as tolerated:`);
                      managementFocus.push(`<ul><li><strong>RAAS Inhibitor:</strong> ARNI (preferred), ACEi, or ARB.</li><li><strong>Beta-Blocker:</strong> Evidence-based (e.g., Metoprolol Succinate, Carvedilol, Bisoprolol). Start low, go slow once stable.</li><li><strong>MRA:</strong> (Spironolactone/Eplerenone) if LVEF ≤ 35% (or ≤40% post-MI) and no contraindications (monitor K+, renal function).</li><li><strong>SGLT2 Inhibitor:</strong> (e.g., Dapagliflozin, Empagliflozin) regardless of diabetes status (check eGFR).</li></ul>`);
                      notes.push(`Continue home GDMT if patient was already on it, unless contraindicated by acute presentation (e.g., shock).`);
                      notes.push(`Defer initiating or uptitrating beta-blockers until euvolemic and stable.`);
                      notes.push(`Evaluate need for ICD/CRT based on guidelines (typically after ≥3 months of optimal GDMT, LVEF ≤35%, specific QRS/NYHA criteria).`);
                 } else { // Still managing acute issues (Wet +/- Cold)
                     managementFocus.push(`<strong>Plan for GDMT:</strong> Prepare to initiate/resume/titrate foundational GDMT (${hfType}) once patient is stabilized and approaching euvolemia.`);
                     notes.push(`Continue home beta-blocker if hemodynamically stable ('Wet & Warm'). Hold/reduce if 'Wet & Cold' or shock.`);
                 }
                 notes.push("Consider Hydralazine/Isosorbide Dinitrate, Ivabradine, Digoxin, Vericiguat in specific patient subsets based on guidelines.");
                  notes.push("Assess for iron deficiency (Ferritin, TSAT) and consider IV iron if indicated.");
            }
            else if (hfType === 'HFpEF') {
                 managementFocus.push("<strong>Manage Congestion:</strong> Diuretics remain mainstay for symptom relief from volume overload.");
                 managementFocus.push("<strong>Treat Underlying Causes & Comorbidities:</strong> Aggressively manage hypertension (target <130/80 mmHg), AFib (rate/rhythm control), obesity, diabetes, CAD, sleep apnea.");
                 managementFocus.push("<strong>Consider Specific Therapies:</strong>");
                 managementFocus.push("<ul><li><strong>SGLT2 Inhibitors:</strong> Strong evidence for reducing HF hospitalizations/CV death.</li><li><strong>MRA:</strong> May reduce hospitalizations (consider based on phenotype, monitor K+/renal function).</li><li><strong>ARNI:</strong> May be considered, particularly in lower-LVEF range of HFpEF.</li></ul>");
                 notes.push("Evidence for traditional HFrEF therapies (Beta-blockers, ACEi/ARB beyond BP control) is less robust for mortality benefit in HFpEF, but often used for comorbidities.");
                 notes.push("Focus on lifestyle modifications (exercise, weight management).");
            }


            // --- Display Results ---
            classificationDisplay.innerHTML = classification; // Use innerHTML for bold tags etc.
            managementFocusDisplay.innerHTML = managementFocus.map(item => `<li>${item}</li>`).join('');
            notesDisplay.innerHTML = notes.map(item => `<li>${item}</li>`).join('');

            resultDiv.style.display = 'block'; // Show results section
            resultDiv.scrollIntoView({ behavior: 'smooth' }); // Scroll to results
        }

        // Initialize form (optional, good practice)
        resetForm();

    </script>

</body>

</html>
